<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Migrate_parsetree_versions (ocaml-migrate-parsetree.Migrate_parsetree_versions)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">ocaml-migrate-parsetree</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Migrate_parsetree_versions</span></h1></header><h2>Abstracting an OCaml frontend</h2><div class="spec module-type" id="module-type-Ast"><a href="#module-type-Ast" class="anchor"></a><div class="def module-type"><code><span class="keyword">module type </span><a href="module-type-Ast/index.html">Ast</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Abstract view of a version of an OCaml Ast</p></div></div><div class="spec type" id="type-_types"><a href="#type-_types" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a _types</code><code><span class="keyword"> = </span><span class="type-var">'a</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> = &lt; structure : <span class="type-var">_</span>; signature : <span class="type-var">_</span>; toplevel_phrase : <span class="type-var">_</span>; core_type : <span class="type-var">_</span>; expression : <span class="type-var">_</span>; pattern : <span class="type-var">_</span>; case : <span class="type-var">_</span>; type_declaration : <span class="type-var">_</span>; type_extension : <span class="type-var">_</span>; extension_constructor : <span class="type-var">_</span>; out_value : <span class="type-var">_</span>; out_type : <span class="type-var">_</span>; out_class_type : <span class="type-var">_</span>; out_module_type : <span class="type-var">_</span>; out_sig_item : <span class="type-var">_</span>; out_type_extension : <span class="type-var">_</span>; out_phrase : <span class="type-var">_</span>; mapper : <span class="type-var">_</span>; &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_structure"><a href="#type-get_structure" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_structure</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; structure : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_signature"><a href="#type-get_signature" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_signature</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; signature : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_toplevel_phrase"><a href="#type-get_toplevel_phrase" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_toplevel_phrase</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; toplevel_phrase : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_core_type"><a href="#type-get_core_type" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_core_type</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; core_type : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_expression"><a href="#type-get_expression" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_expression</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; expression : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_pattern"><a href="#type-get_pattern" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_pattern</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; pattern : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_case"><a href="#type-get_case" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_case</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; case : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_type_declaration"><a href="#type-get_type_declaration" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_type_declaration</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; type_declaration : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_type_extension"><a href="#type-get_type_extension" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_type_extension</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; type_extension : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_extension_constructor"><a href="#type-get_extension_constructor" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_extension_constructor</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; extension_constructor : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_out_value"><a href="#type-get_out_value" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_out_value</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; out_value : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_out_type"><a href="#type-get_out_type" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_out_type</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; out_type : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_out_class_type"><a href="#type-get_out_class_type" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_out_class_type</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; out_class_type : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_out_module_type"><a href="#type-get_out_module_type" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_out_module_type</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; out_module_type : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_out_sig_item"><a href="#type-get_out_sig_item" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_out_sig_item</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; out_sig_item : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_out_type_extension"><a href="#type-get_out_type_extension" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_out_type_extension</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; out_type_extension : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_out_phrase"><a href="#type-get_out_phrase" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_out_phrase</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; out_phrase : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-get_mapper"><a href="#type-get_mapper" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a get_mapper</code><code><span class="keyword"> = </span><span class="type-var">'x</span></code><code><span class="keyword"> constraint </span><span class="type-var">'a</span> <a href="index.html#type-_types">_types</a> = &lt; mapper : <span class="type-var">'x</span>; .. &gt;</code></div><div class="doc"></div></div><div class="spec type" id="type-witnesses"><a href="#type-witnesses" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>_ witnesses</code><code></code><code><span class="keyword"> = </span><span class="keyword">private </span></code><code><span class="keyword">..</span></code><code></code></div><div class="doc"><p>A version of the OCaml frontend packs the ast with type witnesses
so that equalities can be recovered dynamically.</p></div></div><div class="spec type" id="type-migration_info"><a href="#type-migration_info" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>_ migration_info</code><code></code><code></code></div><div class="doc"><p><code class="code">migration_info</code> is an opaque type that is used to generate migration
functions.</p></div></div><div class="spec module-type" id="module-type-OCaml_version"><a href="#module-type-OCaml_version" class="anchor"></a><div class="def module-type"><code><span class="keyword">module type </span><a href="module-type-OCaml_version/index.html">OCaml_version</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>An OCaml frontend versions an Ast, version number and some witnesses for
conversion.</p></div></div><div class="spec type" id="type-ocaml_version"><a href="#type-ocaml_version" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'types ocaml_version</code><code><span class="keyword"> = </span>(<span class="keyword">module </span><a href="module-type-OCaml_version/index.html">OCaml_version</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Ast_mapper/index.html#type-mapper">Ast.Ast_mapper.mapper</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_mapper">get_mapper</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Outcometree/index.html#type-out_class_type">Ast.Outcometree.out_class_type</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_out_class_type">get_out_class_type</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Outcometree/index.html#type-out_module_type">Ast.Outcometree.out_module_type</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_out_module_type">get_out_module_type</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Outcometree/index.html#type-out_phrase">Ast.Outcometree.out_phrase</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_out_phrase">get_out_phrase</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Outcometree/index.html#type-out_sig_item">Ast.Outcometree.out_sig_item</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_out_sig_item">get_out_sig_item</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Outcometree/index.html#type-out_type">Ast.Outcometree.out_type</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_out_type">get_out_type</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Outcometree/index.html#type-out_type_extension">Ast.Outcometree.out_type_extension</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_out_type_extension">get_out_type_extension</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Outcometree/index.html#type-out_value">Ast.Outcometree.out_value</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_out_value">get_out_value</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Parsetree/index.html#type-case">Ast.Parsetree.case</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_case">get_case</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Parsetree/index.html#type-core_type">Ast.Parsetree.core_type</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_core_type">get_core_type</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Parsetree/index.html#type-expression">Ast.Parsetree.expression</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_expression">get_expression</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Parsetree/index.html#type-extension_constructor">Ast.Parsetree.extension_constructor</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_extension_constructor">get_extension_constructor</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Parsetree/index.html#type-pattern">Ast.Parsetree.pattern</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_pattern">get_pattern</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Parsetree/index.html#type-signature">Ast.Parsetree.signature</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_signature">get_signature</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Parsetree/index.html#type-structure">Ast.Parsetree.structure</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_structure">get_structure</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Parsetree/index.html#type-toplevel_phrase">Ast.Parsetree.toplevel_phrase</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_toplevel_phrase">get_toplevel_phrase</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Parsetree/index.html#type-type_declaration">Ast.Parsetree.type_declaration</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_type_declaration">get_type_declaration</a><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-OCaml_version/Ast/Parsetree/index.html#type-type_extension">Ast.Parsetree.type_extension</a> <span class="keyword">=</span> <span class="type-var">'types</span> <a href="index.html#type-get_type_extension">get_type_extension</a>)</code><code></code></div><div class="doc"><p>Representing an ocaml version in type language</p></div></div><h2>Concrete frontend instances</h2><div class="spec module" id="module-OCaml_402"><a href="#module-OCaml_402" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="OCaml_402/index.html">OCaml_402</a> : <a href="index.html#module-type-OCaml_version">OCaml_version</a><span class="keyword"> with </span><span class="keyword">module </span><a href="module-type-OCaml_version/Ast/index.html">Ast</a> = <a href="../Ast_402/index.html">Ast_402</a></code></div><div class="doc"></div></div><div class="spec val" id="val-ocaml_402"><a href="#val-ocaml_402" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ocaml_402 : <a href="OCaml_402/index.html#type-types">OCaml_402.types</a> <a href="index.html#type-ocaml_version">ocaml_version</a></code></div><div class="doc"></div></div><div class="spec module" id="module-OCaml_403"><a href="#module-OCaml_403" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="OCaml_403/index.html">OCaml_403</a> : <a href="index.html#module-type-OCaml_version">OCaml_version</a><span class="keyword"> with </span><span class="keyword">module </span><a href="module-type-OCaml_version/Ast/index.html">Ast</a> = <a href="../Ast_403/index.html">Ast_403</a></code></div><div class="doc"></div></div><div class="spec val" id="val-ocaml_403"><a href="#val-ocaml_403" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ocaml_403 : <a href="OCaml_403/index.html#type-types">OCaml_403.types</a> <a href="index.html#type-ocaml_version">ocaml_version</a></code></div><div class="doc"></div></div><div class="spec module" id="module-OCaml_404"><a href="#module-OCaml_404" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="OCaml_404/index.html">OCaml_404</a> : <a href="index.html#module-type-OCaml_version">OCaml_version</a><span class="keyword"> with </span><span class="keyword">module </span><a href="module-type-OCaml_version/Ast/index.html">Ast</a> = <a href="../Ast_404/index.html">Ast_404</a></code></div><div class="doc"></div></div><div class="spec val" id="val-ocaml_404"><a href="#val-ocaml_404" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ocaml_404 : <a href="OCaml_404/index.html#type-types">OCaml_404.types</a> <a href="index.html#type-ocaml_version">ocaml_version</a></code></div><div class="doc"></div></div><div class="spec module" id="module-OCaml_405"><a href="#module-OCaml_405" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="OCaml_405/index.html">OCaml_405</a> : <a href="index.html#module-type-OCaml_version">OCaml_version</a><span class="keyword"> with </span><span class="keyword">module </span><a href="module-type-OCaml_version/Ast/index.html">Ast</a> = <a href="../Ast_405/index.html">Ast_405</a></code></div><div class="doc"></div></div><div class="spec val" id="val-ocaml_405"><a href="#val-ocaml_405" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ocaml_405 : <a href="OCaml_405/index.html#type-types">OCaml_405.types</a> <a href="index.html#type-ocaml_version">ocaml_version</a></code></div><div class="doc"></div></div><div class="spec module" id="module-OCaml_406"><a href="#module-OCaml_406" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="OCaml_406/index.html">OCaml_406</a> : <a href="index.html#module-type-OCaml_version">OCaml_version</a><span class="keyword"> with </span><span class="keyword">module </span><a href="module-type-OCaml_version/Ast/index.html">Ast</a> = <a href="../Ast_406/index.html">Ast_406</a></code></div><div class="doc"></div></div><div class="spec val" id="val-ocaml_406"><a href="#val-ocaml_406" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ocaml_406 : <a href="OCaml_406/index.html#type-types">OCaml_406.types</a> <a href="index.html#type-ocaml_version">ocaml_version</a></code></div><div class="doc"></div></div><div class="spec module" id="module-OCaml_407"><a href="#module-OCaml_407" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="OCaml_407/index.html">OCaml_407</a> : <a href="index.html#module-type-OCaml_version">OCaml_version</a><span class="keyword"> with </span><span class="keyword">module </span><a href="module-type-OCaml_version/Ast/index.html">Ast</a> = <a href="../Ast_407/index.html">Ast_407</a></code></div><div class="doc"></div></div><div class="spec val" id="val-ocaml_407"><a href="#val-ocaml_407" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ocaml_407 : <a href="OCaml_407/index.html#type-types">OCaml_407.types</a> <a href="index.html#type-ocaml_version">ocaml_version</a></code></div><div class="doc"></div></div><div class="spec module" id="module-OCaml_current"><a href="#module-OCaml_current" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>OCaml_current = <a href="index.html#module-OCaml_406">OCaml_406</a></code></div><div class="doc"></div></div><div class="spec val" id="val-ocaml_current"><a href="#val-ocaml_current" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ocaml_current : <a href="OCaml_406/index.html#type-types">OCaml_current.types</a> <a href="index.html#type-ocaml_version">ocaml_version</a></code></div><div class="doc"></div></div><div class="spec val" id="val-all_versions"><a href="#val-all_versions" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>all_versions : (<span class="keyword">module </span><a href="module-type-OCaml_version/index.html">OCaml_version</a>) list</code></div><div class="doc"></div></div><h2>Migrating between different versions</h2><div class="spec type" id="type-type_comparison"><a href="#type-type_comparison" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>('a, 'b) type_comparison</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-type_comparison.Lt" class="anchored"><td class="def constructor"><a href="#type-type_comparison.Lt" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Lt</span> <span class="keyword">:</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-type_comparison">type_comparison</a></code></td></tr><tr id="type-type_comparison.Eq" class="anchored"><td class="def constructor"><a href="#type-type_comparison.Eq" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Eq</span> <span class="keyword">:</span> (<span class="type-var">'a</span>, <span class="type-var">'a</span>) <a href="index.html#type-type_comparison">type_comparison</a></code></td></tr><tr id="type-type_comparison.Gt" class="anchored"><td class="def constructor"><a href="#type-type_comparison.Gt" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Gt</span> <span class="keyword">:</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-type_comparison">type_comparison</a></code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-compare_ocaml_version"><a href="#val-compare_ocaml_version" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>compare_ocaml_version : <span class="type-var">'a</span> <a href="index.html#type-ocaml_version">ocaml_version</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-ocaml_version">ocaml_version</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-type_comparison">type_comparison</a></code></div><div class="doc"></div></div><div class="spec type" id="type-migration_functions"><a href="#type-migration_functions" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>('from, 'to_) migration_functions</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-migration_functions.copy_structure" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_structure" class="anchor"></a><code>copy_structure : <span class="type-var">'from</span> <a href="index.html#type-get_structure">get_structure</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_structure">get_structure</a>;</code></td></tr><tr id="type-migration_functions.copy_signature" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_signature" class="anchor"></a><code>copy_signature : <span class="type-var">'from</span> <a href="index.html#type-get_signature">get_signature</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_signature">get_signature</a>;</code></td></tr><tr id="type-migration_functions.copy_toplevel_phrase" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_toplevel_phrase" class="anchor"></a><code>copy_toplevel_phrase : <span class="type-var">'from</span> <a href="index.html#type-get_toplevel_phrase">get_toplevel_phrase</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_toplevel_phrase">get_toplevel_phrase</a>;</code></td></tr><tr id="type-migration_functions.copy_core_type" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_core_type" class="anchor"></a><code>copy_core_type : <span class="type-var">'from</span> <a href="index.html#type-get_core_type">get_core_type</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_core_type">get_core_type</a>;</code></td></tr><tr id="type-migration_functions.copy_expression" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_expression" class="anchor"></a><code>copy_expression : <span class="type-var">'from</span> <a href="index.html#type-get_expression">get_expression</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_expression">get_expression</a>;</code></td></tr><tr id="type-migration_functions.copy_pattern" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_pattern" class="anchor"></a><code>copy_pattern : <span class="type-var">'from</span> <a href="index.html#type-get_pattern">get_pattern</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_pattern">get_pattern</a>;</code></td></tr><tr id="type-migration_functions.copy_case" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_case" class="anchor"></a><code>copy_case : <span class="type-var">'from</span> <a href="index.html#type-get_case">get_case</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_case">get_case</a>;</code></td></tr><tr id="type-migration_functions.copy_type_declaration" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_type_declaration" class="anchor"></a><code>copy_type_declaration : <span class="type-var">'from</span> <a href="index.html#type-get_type_declaration">get_type_declaration</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_type_declaration">get_type_declaration</a>;</code></td></tr><tr id="type-migration_functions.copy_type_extension" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_type_extension" class="anchor"></a><code>copy_type_extension : <span class="type-var">'from</span> <a href="index.html#type-get_type_extension">get_type_extension</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_type_extension">get_type_extension</a>;</code></td></tr><tr id="type-migration_functions.copy_extension_constructor" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_extension_constructor" class="anchor"></a><code>copy_extension_constructor : <span class="type-var">'from</span> <a href="index.html#type-get_extension_constructor">get_extension_constructor</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_extension_constructor">get_extension_constructor</a>;</code></td></tr><tr id="type-migration_functions.copy_out_value" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_out_value" class="anchor"></a><code>copy_out_value : <span class="type-var">'from</span> <a href="index.html#type-get_out_value">get_out_value</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_out_value">get_out_value</a>;</code></td></tr><tr id="type-migration_functions.copy_out_type" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_out_type" class="anchor"></a><code>copy_out_type : <span class="type-var">'from</span> <a href="index.html#type-get_out_type">get_out_type</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_out_type">get_out_type</a>;</code></td></tr><tr id="type-migration_functions.copy_out_class_type" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_out_class_type" class="anchor"></a><code>copy_out_class_type : <span class="type-var">'from</span> <a href="index.html#type-get_out_class_type">get_out_class_type</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_out_class_type">get_out_class_type</a>;</code></td></tr><tr id="type-migration_functions.copy_out_module_type" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_out_module_type" class="anchor"></a><code>copy_out_module_type : <span class="type-var">'from</span> <a href="index.html#type-get_out_module_type">get_out_module_type</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_out_module_type">get_out_module_type</a>;</code></td></tr><tr id="type-migration_functions.copy_out_sig_item" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_out_sig_item" class="anchor"></a><code>copy_out_sig_item : <span class="type-var">'from</span> <a href="index.html#type-get_out_sig_item">get_out_sig_item</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_out_sig_item">get_out_sig_item</a>;</code></td></tr><tr id="type-migration_functions.copy_out_type_extension" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_out_type_extension" class="anchor"></a><code>copy_out_type_extension : <span class="type-var">'from</span> <a href="index.html#type-get_out_type_extension">get_out_type_extension</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_out_type_extension">get_out_type_extension</a>;</code></td></tr><tr id="type-migration_functions.copy_out_phrase" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_out_phrase" class="anchor"></a><code>copy_out_phrase : <span class="type-var">'from</span> <a href="index.html#type-get_out_phrase">get_out_phrase</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_out_phrase">get_out_phrase</a>;</code></td></tr><tr id="type-migration_functions.copy_mapper" class="anchored"><td class="def field"><a href="#type-migration_functions.copy_mapper" class="anchor"></a><code>copy_mapper : <span class="type-var">'from</span> <a href="index.html#type-get_mapper">get_mapper</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-get_mapper">get_mapper</a>;</code></td></tr></table><code>}</code><code></code></div><div class="doc"><p>A record for migrating each AST construct between two known versions</p></div></div><div class="spec val" id="val-migration_identity"><a href="#val-migration_identity" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>migration_identity : (<span class="type-var">'a</span>, <span class="type-var">'a</span>) <a href="index.html#type-migration_functions">migration_functions</a></code></div><div class="doc"><p>Migrating to the same version is no-op</p></div></div><div class="spec val" id="val-migration_compose"><a href="#val-migration_compose" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>migration_compose : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-migration_functions">migration_functions</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'c</span>) <a href="index.html#type-migration_functions">migration_functions</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'c</span>) <a href="index.html#type-migration_functions">migration_functions</a></code></div><div class="doc"><p>Migrations can be composed</p></div></div><p>Represent the next or previous version of an Ast</p><div class="spec type" id="type-immediate_migration"><a href="#type-immediate_migration" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'from immediate_migration</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-immediate_migration.No_migration" class="anchored"><td class="def constructor"><a href="#type-immediate_migration.No_migration" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">No_migration</span> <span class="keyword">:</span> <span class="type-var">'from</span> <a href="index.html#type-immediate_migration">immediate_migration</a></code></td><td class="doc"><p>(** Cannot migrate earliest or latest supported version *)</p></td></tr><tr id="type-immediate_migration.Immediate_migration" class="anchored"><td class="def constructor"><a href="#type-immediate_migration.Immediate_migration" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Immediate_migration</span><span class="keyword"> : </span>(<span class="type-var">'from</span>, <span class="type-var">'to_</span>) <a href="index.html#type-migration_functions">migration_functions</a><span class="keyword"> * </span><span class="type-var">'to_</span> <a href="index.html#type-ocaml_version">ocaml_version</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'from</span> <a href="index.html#type-immediate_migration">immediate_migration</a></code></td><td class="doc"><p>(** Pack the migration functions and the new version *)</p></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-immediate_migration"><a href="#val-immediate_migration" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>immediate_migration : <span class="type-var">'types</span> <a href="index.html#type-ocaml_version">ocaml_version</a> <span class="keyword">&#8209;&gt;</span> [&lt; `Next | `Previous ] <span class="keyword">&#8209;&gt;</span> <span class="type-var">'types</span> <a href="index.html#type-immediate_migration">immediate_migration</a></code></div><div class="doc"></div></div><div class="spec val" id="val-migrate"><a href="#val-migrate" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>migrate : <span class="type-var">'from</span> <a href="index.html#type-ocaml_version">ocaml_version</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'to_</span> <a href="index.html#type-ocaml_version">ocaml_version</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'from</span>, <span class="type-var">'to_</span>) <a href="index.html#type-migration_functions">migration_functions</a></code></div><div class="doc"></div></div><h2>Convenience definitions</h2><div class="spec module" id="module-Convert"><a href="#module-Convert" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Convert/index.html">Convert</a> : <span class="keyword">functor</span> (<a href="Convert/argument-1-A/index.html">A</a> : <a href="index.html#module-type-OCaml_version">OCaml_version</a>) -&gt; <span class="keyword">functor</span> (<a href="Convert/argument-2-B/index.html">B</a> : <a href="index.html#module-type-OCaml_version">OCaml_version</a>) -&gt; <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Module level migration</p></div></div></body></html>